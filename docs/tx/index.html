<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Astriot-WebDemoTx</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

    <!-- Favicon links -->
    <link rel="icon" type="image/png" sizes="16x16" href="/astriot/img/favicon/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/astriot/img/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/astriot/img/favicon/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/astriot/img/favicon/android-chrome-512x512.png">
    <link rel="apple-touch-icon" href="/astriot/img/favicon/apple-touch-icon.png">
    <link rel="manifest" href="/astriot/img/favicon/site.webmanifest">
    <link rel="shortcut icon" href="/astriot/img/favicon/favicon.ico">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=PT+Sans:400,700|Ropa+Sans&display=swap" rel="stylesheet">

    <!-- CSS links -->
    <link href="/astriot/css/style.css" rel="stylesheet">
</head>

<body>
    <div id="app" class="main-container">
        <nav class="navbar navbar-expand-lg fixed-top container">
            <div class="container justify-content-center">
                <a class="navbar-brand" href="#">
                    <img class="logo-img" src="/astriot/img/favicon/android-chrome-192x192.png" alt="Astriot">
                </a>
                <span class="logo-text">Astriot Tx<!-- - WebDemoTx--></span>
                <div class="ms-auto me-2 d-flex align-items-center">
                    <!-- Connection Indicator with dynamic class -->
                    <div id="connectionIndicator" :class="connectionStatus"></div>
                    <!-- FPS Display bound to Vue data -->
                    <span id="fpsDisplay" class="badge bg-primary">{{ fps }} FPS</span>
                </div>
            </div>
        </nav>
        <div class="container" style="margin-top: 3.5rem; padding: 0;">
            <div class="scroll-container">
                <div class="container mt-4">
                    <!-- Camera Selection Row -->
                    <div class="row mb-3 align-items-center">
                        <!-- Column 1: Icon and Switch -->
                        <div class="col-auto d-flex align-items-center" style="width: 100px;">
                            <i class="fas fa-power-off fa-lg me-2"
                                :class="{'astriot-text-success': switchReactiveVars.appOn, 'astriot-text-muted': !switchReactiveVars.appOn}"
                                @click="toggleSwitch('appOn')" style="cursor: pointer;"></i>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="cameraSwitch"
                                    v-model="switchReactiveVars.appOn">
                            </div>
                        </div>
                        <!-- Column 2: Content -->
                        <div class="col">
                            <select class="form-select" id="cameraSelect" v-model="camerasReactiveVars.selectedCameraId"
                                @change="onSelectedCameraChange" :readonly="!switchReactiveVars.appOn">
                                <option v-for="(camera, index) in camerasReactiveVars.cameras" :value="camera.deviceId"
                                    :key="camera.deviceId">
                                    {{ camera.label || `Camera ${index + 1}` }}
                                </option>
                            </select>
                        </div>
                    </div>


                    <!-- Filter Name Row (Informational Icon) -->
                    <div class="row mb-3 align-items-center">
                        <!-- Column 1: Icon and Placeholder -->
                        <div class="col-auto d-flex align-items-center" style="width: 100px;">
                            <i class="fas fa-cog fa-lg me-2 astriot-text-success"></i>
                            <span style="width: 3em;"></span> <!-- Placeholder to match switch width -->
                        </div>
                        <!-- Column 2: Content -->
                        <div class="col">
                            <select class="form-select" v-model="selectedProcessorName"
                                @change="onImageProcessorChange">
                                <option v-for="processorName in processorNames" :key="processorName"
                                    :value="processorName">
                                    {{ processorName }}
                                </option>
                            </select>
                        </div>

                    </div>

                    <!-- Visual Output Row -->
                    <div class="row mb-3 align-items-center">
                        <!-- Column 1: Icon and Switch -->
                        <div class="col-auto d-flex flex-column gap-5" style="width: 100px;">
                            <!-- First Icon and Switch -->
                            <div class="d-flex align-items-center">
                                <i class="fas fa-video fa-lg me-2"
                                    :class="{'astriot-text-success': switchReactiveVars.showVideoOn, 'astriot-text-muted': !switchReactiveVars.showVideoOn}"
                                    style="cursor: pointer;" @click="toggleSwitch('showVideoOn')"></i>
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="videoImgOnSwitch"
                                        v-model="switchReactiveVars.showVideoOn">
                                </div>
                            </div>

                            <!-- Second Icon and Switch -->
                            <div class="d-flex align-items-center">
                                <i class="fas fa-exchange-alt fa-lg me-2"
                                    :class="{'astriot-text-success': switchReactiveVars.mirrorViewOn, 'astriot-text-muted': !switchReactiveVars.mirrorViewOn}"
                                    style="cursor: pointer;" @click="toggleSwitch('mirrorViewOn')"></i>
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox"
                                        v-model="switchReactiveVars.mirrorViewOn">
                                </div>
                            </div>

                            <!-- Third Icon and Switch -->
                            <div class="d-flex align-items-center">
                                <i class="fas fa-draw-polygon fa-lg me-2"
                                    :class="{'astriot-text-success': switchReactiveVars.resultInVideoOn, 'astriot-text-muted': !switchReactiveVars.resultInVideoOn}"
                                    style="cursor: pointer;" @click="toggleSwitch('resultInVideoOn')"></i>
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox"
                                        v-model="switchReactiveVars.resultInVideoOn">
                                </div>
                            </div>
                        </div>

                        <!-- Column 2: Content -->
                        <div class="col">
                            <div id="visualOutput">
                                <canvas id="cameraCanvas" ref="cameraCanvas"
                                    :class="{ 'disabled-container': !switchReactiveVars.appOn }"></canvas>
                            </div>
                        </div>
                    </div> <!-- End of Visual Output Row -->

                    <!-- Text Output Row -->
                    <div class="row mb-3 align-items-center">
                        <!-- Column 1: Icon and Switch -->
                        <div class="col-auto d-flex align-items-center" style="width: 100px;">
                            <i class="fas fa-pen-to-square fa-lg me-2"
                                :class="{'astriot-text-success': switchReactiveVars.resultInTextOn, 'astriot-text-muted': !switchReactiveVars.resultInTextOn}"
                                @click="toggleSwitch('resultInTextOn')" style="cursor: pointer;"></i>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="textSwitch"
                                    v-model="switchReactiveVars.resultInTextOn">
                            </div>
                        </div>
                        <!-- Column 2: Content -->
                        <div class="col">
                            <div id="textOutput">
                                <textarea class="form-control" id="textareaOutput" rows="5" readonly
                                    ref="textareaOutput"
                                    :class="{ 'disabled-container': !switchReactiveVars.appOn }"></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- Message Output Row (Informational Icon) -->
                    <div class="row mb-3 align-items-center">
                        <!-- Column 1: Icon and Placeholder -->
                        <div class="col-auto d-flex align-items-center" style="width: 100px;">
                            <i class="fas fa-message fa-lg me-2 astriot-text-success"></i>
                            <span style="width: 3em;"></span> <!-- Placeholder to match switch width -->
                        </div>
                        <!-- Column 2: Content -->
                        <div class="col">
                            <div id="messageOutput" v-show="showMessages">
                                <div v-html="messages"></div>
                            </div>
                        </div>
                    </div>

                </div> <!-- End of scroll-container -->
            </div> <!-- End of container -->
        </div> <!-- End of main-container -->
    </div> <!-- End of app -->

    <!-- Vue.js Application Script -->
    <script src="/astriot/js/app.js" type="module"></script>
</body>

</html>